<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>퀘스트 상세 • 로나월드</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; }
  .card { border:1px solid #e5e7eb; border-radius:0.75rem; background:#fff; padding:1rem; }
  .muted { color:#6b7280; }
  .row { display:flex; align-items:center; gap:.75rem; }
  .grid { display:grid; gap:1rem; }
  img { max-width:100%; height:auto; }
  .thumb { width:56px; height:56px; object-fit:contain; background:#fff; border:1px solid #e5e7eb; border-radius:0.5rem; padding:4px; }
  .ibox { display:flex; align-items:center; gap:.75rem; padding:.5rem; border:1px solid #e5e7eb; border-radius:0.75rem; background:#fff; transition: background .15s ease; }
  .ibox:hover { background:#f9fafb; }
  .bubble{position:relative;max-width:80%;padding:.625rem .75rem;border-radius:1rem;line-height:1.45;box-shadow:0 1px 2px rgba(0,0,0,.06)}
  .bubble-left{background:#f8fafc;border:1px solid #e5e7eb;color:#111827}
  .bubble-right{background:#3b82f6;border:1px solid #1d4ed8;color:#fff}
  .bubble-left:after{content:"";position:absolute;left:-6px;top:12px;border-width:6px;border-style:solid;border-color:transparent #e5e7eb transparent transparent}
  .bubble-left:before{content:"";position:absolute;left:-5px;top:12px;border-width:6px;border-style:solid;border-color:transparent #f8fafc transparent transparent}
  .bubble-right:after{content:"";position:absolute;right:-6px;top:12px;border-width:6px;border-style:solid;border-color:transparent transparent transparent #1d4ed8}
  .bubble-right:before{content:"";position:absolute;right:-5px;top:12px;border-width:6px;border-style:solid;border-color:transparent transparent transparent #3b82f6}
  .bubble-name{font-weight:600;font-size:.875rem;margin-bottom:.125rem}
  .avatar{width:40px;height:40px;border-radius:9999px;border:1px solid #e5e7eb;object-fit:cover;background:#fff}
</style>
</head>
<body class="bg-gray-50 text-gray-900">
<div class="mx-auto max-w-5xl p-4 sm:p-6 lg:p-8">
<a class="inline-flex items-center gap-1 text-sm mb-4 text-blue-600 hover:underline" href="index.html?tab=quests" id="back-to-quests">← 퀘스트 목록으로</a>
<article id="detail"></article>
</div>
<script>
(()=>{
  'use strict';
  const q =
  {
  "id": "2010",
  "code": "제인 1-1",
  "title": "제인과 와일드보어",
  "type": "아이템 수집",
  "region": "리스항구",
  "minLevel": 25,
  "start": {
    "npc": {
      "name": "제인",
      "img": "https://drive.google.com/thumbnail?id=1MgvLqqjitSeAb_0O6YS5F1abUpAMesfN&sz=w400",
      "id": "1002100"
    },
    "place": {
      "name": "리스항구",
      "img": "https://drive.google.com/thumbnail?id=14oqcw8cbRUt8UY7IUtRKnBzDFW5tpxdS&sz=w800",
      "code": "104000000"
    }
  },
  "finish": {
    "npc": {
      "name": "제인",
      "img": "https://drive.google.com/thumbnail?id=1MgvLqqjitSeAb_0O6YS5F1abUpAMesfN&sz=w400",
      "id": "1002100"
    },
    "place": {
      "name": "리스항구",
      "img": "https://drive.google.com/thumbnail?id=14oqcw8cbRUt8UY7IUtRKnBzDFW5tpxdS&sz=w800",
      "code": "104000000"
    }
  },
  "dialogues": [
    {"who":"제인","text":"하아 ... 저도 여행자님처럼 모험을 떠나고 싶지만 아버지께서 절대로 안된다고 하시네요 ….. 어렸을 때부터 남몰래 수련을 쌓아 왔기 때문에 자신 있는데 …. 아무래도 못 미더우신 모양이에요. 어떻게 하면 좋을까…"},
    {"who":"제인","text":"어머 ..? 그러고 보니 상당히 강해 보이시는군요! 저 ... 부탁 하나만 드려도 될까요 ??? 와일드보어의 송곳니 80개와 뿔버섯의 갓 100개만 모아와 주세요. 그걸 보여드리면 아버지도 제가 여행을 떠나는 것을 허락해 주실지도 몰라요. 제발 부탁드려요 ..."},
    {"who":"제인","text":"아참 ... 와일드보어의 송곳니는 이렇게, 뿔버섯의 갓은 이렇게 생긴 물건이에요. 와일드보어와 뿔버섯에게서 얻을수 있을 거에요. 확실히 보셨죠?"}
  ],
  "completionDialogues": [
    {"who":"제인","text":"와일드보어와 뿔버섯을 이렇게나 많이 쓰러뜨리셨다니 ….. 믿을수가 없어요! 덕분에 아버지에게 저도 여행할 수 있을 만큼 강해졌다고 말씀드릴수 있겠는걸요 ~! 정말 도와주셔서 감사합니다. 다행이에요 ..."},
    {"who":"제인","text":"잠깐! 드릴 건 드려야겠죠? 저를 위해 이렇게 애써 주셨으니 오래전부터 소중히 간직해 온 물건을 드릴게요. 아마 여행하는 데 많은 도움이 될 거에요. 여기 받으세요."},
    {"who":"제인","text":"이 주문서는 특정 무기를 강하게 만들어주는 힘이 있는 모양이에요. 사용 방법은 간단하답니다. 아이템의 소비탭과 장비창을 동시에 열어 보세요. 그 후 제가 드린 주문서를 드래그 해서 지금 들고있는 무기위에 놓으면 사용할 수 있어요. 다만 실패할 가능성도 있으니까 신중하게 사용하세요 ..."}
  ],
  "descHtml": "<p>리스 항구의 빅토리아 호 옆에서 토끼 머리띠를 하고 있는 제인을 만났다. 제인은 이곳 저곳으로 모험을 떠나보고 싶지만 아버지의 반대로 그럴수가 없다며 고민하고 있었다. 그녀는 와일드보어의 송곳니 80개와 뿔버섯의 갓 100개만 있다면 아버지가 여행을 떠나는 것을 허락해 주실지도 모른다면서 나에게 대신 모아와 달라고 부탁했다. 그런 거라면 직접 모아야 하는거 아닌가? 아무튼 별로 어려운 일도 아니니 고원 근처의 와일드보어나 사냥해야 봐야 겠다 ...</p>",
  "reqs": [
    {"kind":"item","name":"뿔버섯의 갓","img":"https://drive.google.com/thumbnail?id=1uQnpe-81L7HNzZ6LcggULQpbTvb2H1Ge&sz=w200","qty":100,"id":"4000015"},
    {"kind":"item","name":"와일드보어의 송곳니","img":"https://drive.google.com/thumbnail?id=175Yt1Dz8iiopgJPxLyjdMtX-vYzqQdfH&sz=w200","qty":80,"id":"4000020"}
  ],
  "tips": [
    {"kind":"monster","name":"뿔버섯","level":22,"id":"2110200","img":"https://drive.google.com/thumbnail?id=172QNMG6AFYj0C0UY5o4nldA0f-mPiJwo&sz=w200"},
    {"kind":"monster","name":"와일드보어","level":25,"id":"2230102","img":"https://drive.google.com/thumbnail?id=1QhHy8cxkKUvzNkD-eOiK6BuIroMpHavM&sz=w200"}
  ],
  "startCondsTitle": "",
  "startConds": [],
  "rewards": [
    {"name":"활 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044501"},
    {"name":"석궁 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044601"},
    {"name":"한손검 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043001"},
    {"name":"한손도끼 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043101"},
    {"name":"한손둔기 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043201"},
    {"name":"단검 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043301"},
    {"name":"두손검 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044001"},
    {"name":"두손도끼 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044101"},
    {"name":"두손둔기 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044201"},
    {"name":"창 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044301"},
    {"name":"폴암 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044401"},
    {"name":"완드 마력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043701"},
    {"name":"스태프 마력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2043801"},
    {"name":"아대 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044701"},
    {"name":"너클 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044801"},
    {"name":"건 공격력 주문서 60% [랜덤]","qty":1,"img":"https://drive.google.com/thumbnail?id=1KhOKODVfNThiVBdxUqkoPM6xaY-vvEHi&sz=w200","itemId":"2044901"},
    {"exp":24500,"img":"https://drive.google.com/thumbnail?id=1O9FuxyZEG_nZVJikWShUPKvb5zCH7t-z&sz=w200"}
  ],
  "prereqs": [],
  "nexts": []
};
  const img=(src,alt='',cls='')=>`<img src="${src||''}" alt="${alt||''}" ${cls?`class="${cls}"`:''} onerror="if(!this.dataset.fbk){this.dataset.fbk=1;this.src=this.src.replace('thumbnail?id=','uc?export=view&id=');}else{this.style.display='none'}">`;
  const row=(l,il,nl,r,ir,nr,ll='',lr='')=>{const cell=(label,im,name,link)=>{const inner=`${img(im,name)}<div class='text-sm'><div class='muted'>${label}</div><div class='font-medium'>${name||'-'}</div></div>`;return link?`<a class='row' href='${link}'>${inner}</a>`:`<div class='row'>${inner}</div>`;};return `<div class='row'>${cell(l,il,nl,ll)}<div class='muted' style='padding:0 .5rem'>|</div>${cell(r,ir,nr,lr)}</div>`;};
  const rewardBox=r=>{if(typeof r.exp==='number'){const pic=img(r.img,'EXP','thumb');const txt=`<div class='text-sm font-medium'>경험치 ${r.exp.toLocaleString()} exp</div>`;return `<div class='ibox'>${pic}${txt}</div>`;}const title=`${r.name||''}${(r.qty&&r.qty>0)?' ×'+r.qty:''}`;const pic=img(r.img,r.name,'thumb');const inner=`<div class='text-sm font-medium'>${title}</div>`;return r.itemId?`<a class='ibox' href='https://linsuol13-bit.github.io/LO/item-${r.itemId}.html'>${pic}${inner}</a>`:`<div class='ibox'>${pic}${inner}</div>`;};
  const reqBox=r=>{const isItem=r.kind==='item';const title=isItem?`${r.name} ×${r.qty||''}`:`${r.name} ×${r.qty||''}`;const pic=img(r.img,r.name,'thumb');const href = r.id ? (isItem ? `https://linsuol13-bit.github.io/LO/item-${r.id}.html` : `https://linsuol13-bit.github.io/LO/monster-${r.id}.html`) : '';const inner = `${pic}<div class='text-sm'><div class='muted'>${isItem?'필요 아이템':'처치 대상'}</div><div class='font-medium'>${title}</div></div>`;return href?`<a class='ibox' href='${href}'>${inner}</a>`:`<div class='ibox'>${inner}</div>`;};
  const isPlayer=w=>/^(나|플레이어|주인공|Player|영웅)$/i.test((w||'').toString().trim());
  const avatarFor=who=>{if(who===(q.start.npc&&q.start.npc.name))return q.start.npc.img;if(who===(q.finish.npc&&q.finish.npc.name))return q.finish.npc.img;return '';};
  const dialogueRow=d=>{d=d||{};const left=!isPlayer(d.who);const av=left?avatarFor(d.who):'';const avatar=(left&&av)?`<img class='avatar' src='${av}' alt='${d.who||''}' onerror="if(!this.dataset.fbk){this.dataset.fbk=1;this.src=this.src.replace('thumbnail?id=','uc?export=view&id=');}else{this.style.display='none'}">`:'';return `<div class='flex items-start ${left?'justify-start':'justify-end'} gap-2'>${left?avatar:''}<div class='bubble ${left?'bubble-left':'bubble-right'}'><div class='bubble-name'>${d.who||''}</div><div class='text-sm leading-snug' style='white-space:pre-line'>${d.text||''}</div></div></div>`;};
  const prereqSection=list=>{if(!Array.isArray(list)||!list.length)return'';const boxes=list.map(p=>`<a class='ibox' href='https://linsuol13-bit.github.io/LO/quest-${p.id}.html'><div class='text-sm'><div class='muted'>선행 퀘스트</div><div class='font-medium'>[${p.id}] ${p.title}</div></div></a>`).join('');return `<section class='mb-6'><h2 class='text-sm font-semibold mb-2'>선행 퀘스트</h2><div class='grid'>${boxes}</div></section>`;};
  const nextSection=list=>{if(!Array.isArray(list)||!list.length)return'';const boxes=list.map(n=>`<a class='ibox' href='https://linsuol13-bit.github.io/LO/quest-${n.id}.html'><div class='text-sm'><div class='muted'>다음 퀘스트</div><div class='font-medium'>[${n.id}] ${n.title}</div></div></a>`).join('');return `<section class='mb-6'><h2 class='text-sm font-semibold mb-2'>다음 퀘스트</h2><div class='grid'>${boxes}</div></section>`;};
  const reqSection=list=>{if(!Array.isArray(list)||!list.length)return'';return `<div class='mt-3'><div class='muted text-xs mb-1'>요구 조건</div><div class='grid' style='grid-template-columns:1fr 1fr; gap:.75rem'>${list.map(reqBox).join('')}</div></div>`;};
  const startCondBox=c=>{return ''};
  const startCondsSection=list=>'';
  const tipBox=t=>{ 
    if (t && t.subtitle && !t.kind && !t.name) {
      return `<div class='card text-sm leading-relaxed text-gray-800'>${t.subtitle}</div>`;
    }
    const pic=img(t.img,t.name,'thumb');
    const subtitle = t.kind==='monster' ? '몬스터 사냥' : (t.subtitle||'TIP');
    const level = (t.level && !isNaN(t.level)) ? ` (Lv.${Number(t.level)})` : '';
    const title=`${t.name||''}${level}`;
    const href = t.id ? (t.kind==='monster' ? `https://linsuol13-bit.github.io/LO/monster-${t.id}.html` : `https://linsuol13-bit.github.io/LO/item-${t.id}.html`) : '';
    const inner = `${pic}<div class='text-sm'><div class='muted'>${subtitle}</div><div class='font-medium'>${title}</div></div>`;
    return href?`<a class='ibox' href='${href}'>${inner}</a>`:`<div class='ibox'>${inner}</div>`;
  };
  const tipsSection=list=>{ if(!Array.isArray(list)||!list.length) return ''; return `<section class='mb-6'><h2 class='text-sm font-semibold mb-2'>TIP</h2><div class='grid'>${list.map(tipBox).join('')}</div></section>`; };
  const $detail=document.getElementById('detail');
  $detail.innerHTML=`
    <header class='mb-4'><h1 class='text-2xl font-bold'>${q.code} · ${q.title}</h1><p class='text-sm muted'>${q.region} · ${q.type} · Lv.${q.minLevel}</p></header>
    ${prereqSection(q.prereqs)}
    <section class='grid' style='grid-template-columns:1fr 1fr;'>
      <div class='card'><h2 class='text-sm font-semibold mb-3'>시작</h2>${row('시작 NPC', q.start.npc.img, q.start.npc.name, '시작 장소', q.start.place.img, q.start.place.name, (q.start.npc.id?`https://linsuol13-bit.github.io/LO/npc-${q.start.npc.id}.html`:''), (q.start.place.code?`https://linsuol13-bit.github.io/LO/map-${q.start.place.code}.html`:''))}</div>
      <div class='card'><h2 class='text-sm font-semibold mb-3'>완료</h2>${row('완료 NPC', q.finish.npc.img, q.finish.npc.name, '완료 장소', q.finish.place.img, q.finish.place.name, (q.finish.npc.id?`https://linsuol13-bit.github.io/LO/npc-${q.finish.npc.id}.html`:''), (q.finish.place.code?`https://linsuol13-bit.github.io/LO/map-${q.finish.place.code}.html`:''))}</div>
    </section>
    ${startCondsSection(q.startConds)}
    <section class='mb-6'><h2 class='text-sm font-semibold mb-2'>대사</h2><div class='card' style='display:grid; gap:.5rem'>${(q.dialogues||[]).map(dialogueRow).join('')}</div></section>
    <section class='mb-6'><h2 class='text-sm font-semibold mb-2'>퀘스트 조건</h2><div class='card text-sm leading-relaxed text-gray-800 mb-3'>${q.descHtml}</div>${reqSection(q.reqs)}
      ${tipsSection(q.tips)}
      ${(q.completionDialogues&&q.completionDialogues.length)?`
      <div class='mt-4 pt-3 border-t'><h2 class='text-sm font-semibold mb-2'>완료 대사</h2><div class='card'>${(q.completionDialogues||[]).map(dialogueRow).join("")}</div></div>`:''}
    </section>
    ${(q.rewards&&q.rewards.length)?`<section class='mb-6'><h2 class='text-sm font-semibold mb-2'>완료 보상</h2><div class='grid'>${q.rewards.map(rewardBox).join('')}</div></section>`:''}
    ${nextSection(q.nexts)}
  `;
})();
</script>
<script>
(function(){
  var a=document.getElementById('back-to-quests');
  if(!a) return;
  a.addEventListener('click',function(e){
    e.preventDefault();
    try{
      var href=this.getAttribute('href')||'index.html?tab=quests';
      var u=href+(href.indexOf('?')>-1?'&':'?')+'nocache='+Date.now();
      location.replace(u);
    }catch(err){ location.href='index.html?tab=quests'; }
  });
})();
</script>
</body>
</html>
